{% load humanize %}
{% load static %}

<div class="bg-slate-900/60 border border-slate-700 rounded-lg p-6">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-xl font-semibold text-white">Team Rankings</h2>
    <p class="text-slate-400 text-sm">Current standings and performance metrics</p>
  </div>

  {% if top_teams %}
    <div class="divide-y divide-slate-700">
      {% for t in top_teams %}
        <div class="py-3 flex items-center justify-between {% if highlight_id and t.id|stringformat:'s' == highlight_id %}bg-emerald-900/20 border-l-4 border-emerald-400{% endif %}">
          <div class="flex items-center gap-3">
            <span class="text-slate-400 text-sm">#{{ forloop.counter }}</span>

            {# Team logo #}
            {% if t.logo %}
              <img src="{{ t.logo.url }}" alt="{{ t.name }} logo" class="w-6 h-6 rounded-full border border-slate-700">
            {% else %}
              <img src="{% static 'images/placeholder-logo.png' %}" alt="placeholder logo" class="w-6 h-6 rounded-full border border-slate-700">
            {% endif %}

            <div>
              <p class="text-white font-semibold">
                <a href="{% url 'schedule' %}?team={{ t.id }}{% if game_filter %}&game={{ game_filter }}{% endif %}" class="hover:text-emerald-400">
                  {{ t.name }}
                </a>
              </p>
              <p class="text-slate-400 text-xs">{{ t.game }}</p>
            </div>
          </div>

          <div class="text-right">
            <p class="text-emerald-400 text-sm font-semibold">
              {{ t.points|intcomma }} pts
              {% if t.points_delta is not None %}
                <span class="{% if t.points_delta > 0 %}text-green-400{% elif t.points_delta < 0 %}text-red-400{% else %}text-slate-400{% endif %} text-xs ml-1">
                  {% if t.points_delta > 0 %}+{% endif %}{{ t.points_delta }}
                </span>
              {% endif %}
            </p>
            <p class="text-slate-400 text-xs">
              W {{ t.wins }} • L {{ t.losses }} • MP {{ t.matches_played }} • WR {{ t.win_rate }}%
            </p>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="mt-6 text-center">
      <a href="{% url 'teams' %}?tab=all{% if game_filter %}&game={{ game_filter }}{% endif %}"
         class="inline-flex items-center gap-2 px-4 py-2 rounded-md bg-emerald-600 text-white font-medium hover:bg-emerald-500 transition-colors">
        <i data-lucide="users" class="w-4 h-4"></i> View All Teams
      </a>
    </div>
  {% else %}
    <p class="text-slate-400">No teams found.</p>
  {% endif %}
</div>